---
interface Props {
  dialogId: string;
}

const { dialogId } = Astro.props;
---

<dialog class="dialog" id={dialogId}>
  <button class="dialog__close_btn" data-close-dialog-id={dialogId}>
    <img src="/images/cross.svg" alt="" width="24" height="24" />
  </button>
  <slot />
</dialog>

<script>
  const openButtons = document.querySelectorAll("[data-open-dialog-id]");
  openButtons.forEach((btn) => {
    btn.addEventListener("click", () => {
      //@ts-ignore
      const openDialogId = btn.dataset.openDialogId;
      const dialog = document.getElementById(openDialogId);
      //@ts-ignore
      dialog.showModal();
    });
  });

  const closeButtons = document.querySelectorAll("[data-close-dialog-id]");
  closeButtons.forEach((btn) => {
    btn.addEventListener("click", () => {
      //@ts-ignore
      const closeDialogId = btn.dataset.closeDialogId;
      const dialog = document.getElementById(closeDialogId);
      //@ts-ignore
      dialog.close();
    });
  });
</script>

<style>
  @import url("/common.css");

  .dialog {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 90%;
    max-width: 600px;
    padding: 2rem;
    padding-top: 8rem;
    border: 1px solid var(--grey);
    border-radius: 6px;
  }

  .dialog__close_btn {
    border: 1px solid var(--grey-2);
    border-radius: 6px;
    background: inherit;
    padding: 0.4rem;
    position: absolute;
    right: 1.8rem;
    top: 1.8rem;
  }

  .dialog__close_btn img {
    position: relative;
    top: 0.4rem;
  }
</style>
