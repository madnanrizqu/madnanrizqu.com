---
import { getCollection } from "astro:content";

import Layout from "../layouts/Layout.astro";
import Testimony from "../components/Testimony.astro";
import Project from "../components/Project.astro";
import { slugify } from "../scripts/url";

// loads first 3 testimonies
const testimoniesCollections = await getCollection("testimonies");
const testimonies = await Promise.all(
  testimoniesCollections.map(async (v) => {
    const { Content } = await v.render();
    return {
      ...v,
      Content,
    };
  })
);

// loads first 3 projects
const projects = await getCollection("projects");

// loads work availability
import * as workInfo from "../info/work-availability.md";
import HeadlineText from "../components/HeadlineText.astro";
import CallToActionHeadline from "../components/CallToActionHeadline.astro";
---

<Layout title="M Adnan Rizqullah, Software Engineer">
  <main>
    <section id="hero" class="relative">
      <div class="relative h-screen pt-[5.4rem] flex flex-col gap-6 cmn_container md:flex-row md:items-center md:justify-between">
        <div class="flex justify-center max-h-[320px] flex-1 md:order-2 md:h-[50vh] md:max-h-none lg:h-[70vh] lg:max-h-[700px] lg:relative lg:-bottom-12">
          <img
            class="h-full grayscale"
            alt="Picture of Adnan smiling"
            srcset="/images/hero_mobile.png 500w, /images/hero.png 1000w"
            sizes="(max-width: 600px) 480px, 1000px"
          />
        </div>
        <div class="text-start flex flex-col gap-[0.2rem] flex-1">
          <span>
            Hi, I'm <span class="font-bold">Adnan</span> a Software Engineer
          </span>
          <HeadlineText />
        </div>
        <footer class="absolute bottom-6">
          <div class="flex gap-4 w-full">
            <a href="/#portfolio_target" class="cmn_button--outline">Learn More</a>
            <a href="/contact/" class="cmn_button--solid_secondary">Contact Me</a>
          </div>
        </footer>
      </div>
    </section>

    <div class="space-y-32 my-36">
        <section class="relative bg-skin-base text-skin-base flex flex-col gap-14">
          <div class="cmn_container">
            <div id="portfolio_target" class="absolute -top-24"></div>
            <div>
              <h2 class="text-primary font-bold mb-8">Summary</h2>
              <div class="flex flex-col gap-10">
                <p>
                  Adnan is a Web Development Software Engineer with 4 years of
                  experience across various company sizes from innovative seed
                  startups to industry leading decacorns. He specializes in React,
                  Next.js, Express.js, and TypeScript, building web apps and
                  defining engineering best practices. With a bachelor's in
                  Informatics and pursuing a Master's in Computer Science, He also
                  contributes to the tech community through mentoring, speaking at
                  workshops, and creating educational content.
                </p>

                <p>
                  Skills: React.js, Next.js, Vue.js, Nuxt.js, Node.js, Express.js,
                  Electron.js, Javascript, Typescript, ReasonML, Golang, Redux,
                  Zustand, Docker, Ant Design, Material UI, Chakra UI, Tailwind,
                  Emotion, Storybook, Playwright, Selenium, Jest, Vitest, SASS,
                  LESS, HTML, CSS
                </p>

                <p>
                  By the way, this website is created with Astro. Which i don't list
                  on my skills used professionally. I believe any skills needed for
                  a job can just be learned :D
                </p>

                <p>
                  Right now, <span class="font-bold">{workInfo.frontmatter.message}</span>
                </p>
              </div>
            </div>
          </div>
          <aside class="bg-skin-base text-skin-base py-10">
            <div class="cmn_container grid grid-cols-2 gap-8 md:grid-cols-3 lg:flex lg:justify-between">
              <div class="flex flex-col items-center gap-1">
                <span class="text-base bg-gradient-to-r from-secondary to-primary bg-clip-text text-transparent">Companies</span>
                <span class="text-5xl font-bold bg-gradient-to-r from-secondary to-primary bg-clip-text text-transparent">5</span>
              </div>
              <div class="flex flex-col items-center gap-1">
                <span class="text-base bg-gradient-to-r from-secondary to-primary bg-clip-text text-transparent">Projects</span>
                <span class="text-5xl font-bold bg-gradient-to-r from-secondary to-primary bg-clip-text text-transparent">20+</span>
              </div>
              <div class="flex flex-col items-center gap-1">
                <span class="text-base bg-gradient-to-r from-secondary to-primary bg-clip-text text-transparent">Users</span>
                <span class="text-5xl font-bold bg-gradient-to-r from-secondary to-primary bg-clip-text text-transparent">10M+</span>
              </div>
              <div class="flex flex-col items-center gap-1">
                <span class="text-base bg-gradient-to-r from-secondary to-primary bg-clip-text text-transparent">Speaker Events</span>
                <span class="text-5xl font-bold bg-gradient-to-r from-secondary to-primary bg-clip-text text-transparent">10+</span>
              </div>
              <div class="flex flex-col items-center gap-1">
                <span class="text-base bg-gradient-to-r from-secondary to-primary bg-clip-text text-transparent">Mentees</span>
                <span class="text-5xl font-bold bg-gradient-to-r from-secondary to-primary bg-clip-text text-transparent">6</span>
              </div>
            </div>
          </aside>
          <footer class="cmn_container w-full">
            <a href="/portfolio/#background" class="cmn_button--outline_primary w-full block">
              Read More About My Work
            </a>
          </footer>
        </section>

        <section class="projects" id="projects">
          <div class="cmn_container">
            <h2 class="projects__headline">Projects</h2>
            <ol class="projects__list">
              {
                projects.map((p) => (
                  <li>
                    <Project
                      {...p.data}
                      projectDetailSlug={`/projects/${slugify(p.data.title)}`}
                    />
                  </li>
                ))
              }
            </ol>
          </div>
        </section>

        <section class="social_proof" id="social_proof">
          <div class="cmn_container">
            <h2 class="social_proof__headline">What Others Say About Me</h2>
            <ol class="social_proof_list">
              {
                testimonies.map((v) => (
                  <li>
                    <Testimony
                      dialogId={`dialog_testimony_${v.data.id}`}
                      summary={v.data.shortVersion}
                      author={v.data.author}
                    >
                      <v.Content />
                    </Testimony>
                  </li>
                ))
              }
            </ol>
          </div>
        </section>

        <section class="technologies">
          <div class="cmn_container technologies_inner">
            <h2 class="technologies__headline">Technologies I Use</h2>
            <p>These are the tech that I have used professionaly</p>

            <ol class="technologies__categories">
              <li class="technologies__categories_item">
                <h3>Progamming Language</h3>
                <ol class="technologies__items">
                  <li><span class="technologies__item">TypeScript</span></li>
                  <li><span class="technologies__item">Node.js</span></li>
                  <li><span class="technologies__item">JavaScript</span></li>
                  <li><span class="technologies__item">ReasonML</span></li>
                  <li><span class="technologies__item">Python</span></li>
                  <li><span class="technologies__item">Go</span></li>
                </ol>
              </li>
              <li class="technologies__categories_item">
                <h3>JavaScript Framework</h3>
                <ol class="technologies__items">
                  <li><span class="technologies__item">Next.js</span></li>
                  <li><span class="technologies__item">Express.js</span></li>
                  <li><span class="technologies__item">Nest.js</span></li>
                  <li><span class="technologies__item">React.js</span></li>
                  <li><span class="technologies__item">Vue.js</span></li>
                  <li><span class="technologies__item">Nuxt.js</span></li>
                  <li><span class="technologies__item">Electron.js</span></li>
                </ol>
              </li>
              <li class="technologies__categories_item">
                <h3>Styling</h3>
                <ol class="technologies__items">
                  <li><span class="technologies__item">CSS</span></li>
                  <li><span class="technologies__item">LESS</span></li>
                  <li><span class="technologies__item">SASS</span></li>
                  <li><span class="technologies__item">Tailwind</span></li>
                  <li><span class="technologies__item">Emotion</span></li>
                </ol>
              </li>
              <li class="technologies__categories_item">
                <h3>UI Libraries</h3>
                <ol class="technologies__items">
                  <li><span class="technologies__item">Antd</span></li>
                  <li><span class="technologies__item">Material</span></li>
                  <li><span class="technologies__item">Chakra UI</span></li>
                  <li><span class="technologies__item">Bulma</span></li>
                  <li><span class="technologies__item">Bootsrap</span></li>
                </ol>
              </li>
              <li class="technologies__categories_item">
                <h3>Testing</h3>
                <ol class="technologies__items">
                  <li><span class="technologies__item">Jest</span></li>
                  <li><span class="technologies__item">Vitest</span></li>
                  <li>
                    <span class="technologies__item">React Testing Library</span>
                  </li>
                  <li><span class="technologies__item">Cypress</span></li>
                  <li><span class="technologies__item">Selenium</span></li>
                </ol>
              </li>
              <li class="technologies__categories_item">
                <h3>State Management</h3>
                <ol class="technologies__items">
                  <li><span class="technologies__item">Zustand</span></li>
                  <li><span class="technologies__item">Redux</span></li>
                  <li><span class="technologies__item">Vuex</span></li>
                </ol>
              </li>
              <li class="technologies__categories_item">
                <h3>Data Fetching</h3>
                <ol class="technologies__items">
                  <li><span class="technologies__item">Axios</span></li>
                  <li><span class="technologies__item">React Query</span></li>
                  <li><span class="technologies__item">useSWR</span></li>
                  <li><span class="technologies__item">Redux Thunk</span></li>
                </ol>
              </li>
              <li class="technologies__categories_item">
                <h3>Database</h3>
                <ol class="technologies__items">
                  <li><span class="technologies__item">SQL (Postgres)</span></li>
                </ol>
              </li>
              <li class="technologies__categories_item">
                <h3>Other</h3>
                <ol class="technologies__items">
                  <li><span class="technologies__item">Webpack</span></li>
                  <li><span class="technologies__item">Storybook</span></li>
                  <li><span class="technologies__item">Docker</span></li>
                  <li><span class="technologies__item">HTML</span></li>
                </ol>
              </li>
              <li class="technologies__categories_item">
                <h3>3rd Party Services</h3>
                <ol class="technologies__items">
                  <li><span class="technologies__item">Github</span></li>
                  <li><span class="technologies__item">Gitlab</span></li>
                  <li><span class="technologies__item">JIRA</span></li>
                  <li><span class="technologies__item">Grafana</span></li>
                  <li><span class="technologies__item">Jenkins</span></li>
                  <li>
                    <span class="technologies__item">Google Analytics</span>
                  </li>
                  <li>
                    <span class="technologies__item">Google Lighthouse</span>
                  </li>
                </ol>
              </li>
            </ol>
          </div>
        </section>

        <section class="bg-skin-base text-skin-base">
          <div class="cmn_container">
            <CallToActionHeadline />
            <a href="/contact/" class="cmn_button--outline">Contact me</a>
          </div>
        </section>
    </div>
  </main>
</Layout>

<style>
.main_headline {
  color: var(--primary);
}

/* BACKGROUND SECTION */
.background {
  padding-bottom: var(--page-section-pad-y);
}

.background__headline {
  color: var(--primary);
  margin-bottom: 2.4rem;
}

.background__content {
  display: flex;
  flex-direction: column;
  gap: 2.4rem;
}

.background__outside_work_list {
  list-style-type: disc;
  display: flex;
  flex-direction: column;
  padding-left: 3.6rem;
  gap: 2.4rem;
}

/* TODO: refactor projects css, reuse for portfolio and home page */
/* PROJECTS SECTION */
.projects {
  background-color: var(--bg-color);
}

.projects__headline {
  color: var(--primary);
  font-weight: var(--font-bold);
  margin-bottom: 2.4rem;
}

.projects__list {
  list-style-type: none;
  display: grid;
  gap: 3.6rem;
  margin-bottom: 2.4rem;
}
@media screen and (min-width: 650px) {
  .projects__list {
    grid-template-columns: 1fr 1fr;
    justify-content: center;
    justify-items: center;
  }

  /*one of the difference from the one on home page: no centered 2nd row*/
}

.project {
  background: var(--grey-2);
  color: var(--white);
  border-radius: 20px;
  overflow: hidden;
}
@media screen and (min-width: 650px) {
  .project {
    height: 100%;
  }
}

.project__img_container > img {
  width: 100%;
  object-fit: fill;
}

.project__texts {
  padding: 1.8rem;
  padding-bottom: 0;
  margin-bottom: 3.2rem;
}

.project__footer {
  padding: 1.8rem;
  padding-top: 0;
}

.project__title {
  font-weight: var(--font-bold);
  margin-bottom: 1.6rem;
  display: inline-block;
}

.project__description {
  display: inline-block;
  margin-bottom: 2.4rem;
}

.project__techs {
  display: flex;
  justify-content: start;
}

.project__techs__inner {
  display: flex;
  justify-content: start;
  flex-wrap: wrap;
  gap: 1rem;
}

.project__tech {
  color: var(--primary);
  border: 1px solid var(--primary);
  border-radius: 12px;
  padding: 0.4rem 1rem;
  font-size: 1.4rem;
}

.project__footer > a {
  width: 100%;
  background-color: var(--primary);
}

.projects__footer {
  text-align: center;
}

.projects__footer > a {
  display: inline-block;
  width: 100%;
}

.social_proof__headline {
  color: var(--primary);
  font-weight: var(--font-bold);
  margin-bottom: 1.6rem;
}

.social_proof_list {
  list-style-type: none;
  display: grid;
  gap: 3.8rem;
  margin-bottom: 3.6rem;
}

@media screen and (min-width: 650px) {
  .social_proof_list {
    grid-template-columns: 1fr 1fr;
    justify-content: center;
    justify-items: center;
  }
}

.social_proof_footer,
.social_proof_footer > a {
  width: 100%;
}

/* TECHNOLOGIES SECTION */
.technologies {
  background-color: var(--bg-color);
  color: var(--font-color);
}

.technologies_inner {
  display: flex;
  flex-direction: column;
  gap: 2.4rem;
}

.technologies__headline {
  color: var(--primary);
}

.technologies__categories {
  display: flex;
  flex-direction: column;
  gap: 2.4rem;
}

.technologies__categories_item {
  display: flex;
  flex-direction: column;
  gap: 1.2rem;
}

.technologies__items {
  display: flex;
  gap: 1.6rem;
  flex-wrap: wrap;
}

/* TODO: refactor to chip item cmn class. reuse on projects and here */
/* TODO: add icon/logo of tech */
.technologies__item {
  font-size: 1.4rem;
  color: var(--secondary);
  border: 1px solid var(--secondary);
  border-radius: 12px;
  padding: 0.4rem 1rem;
}
</style>

<script>
  import Typed from "typed.js";

  import { elNotFound } from "../scripts/error";

  const setHeroAnimatedHeadline = () => {
    const text = document.getElementById("hero__dynamic_text");
    if (!text) {
      throw new Error(elNotFound("hero__dynamic_text"));
    }

    try {
      // Set to no content to avoid jitter
      text.textContent = "";

      new Typed("#hero__dynamic_text", {
        strings: ["smooth", "reliable", "engaging", "aesthetic", "powerful"],
        typeSpeed: 150,
        startDelay: 300,
        loop: true,
        showCursor: false,
        backSpeed: 150,
      });
    } catch (error) {
      text.textContent = "smooth"; // add fallback incase type.js fails to load
    }
  };

  const init = () => {
    setHeroAnimatedHeadline();
  };

  init();

  document.addEventListener("astro:after-swap", () => {
    init();
  });
</script>
